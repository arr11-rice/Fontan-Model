<!--------------------------------------------------------------
ADDITIONS TO FILE IN THE INTEREST OF ADDING PLOTS TO THE WEBPAGE ARE ENCLOSED BY THESE LINES
---------------------------------------------------------------->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Parameter Inputs</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <!-- Embedded Image -->
    <div class="image-container">
        <img src="/static/fontan_diagram.jpeg" usemap="#image-map" alt="Patient Vitals Diagram" class="interactive-image" id="clickable-image">

        <!-- Image Map Generated by http://www.image-map.net/ -->
        <map name="image-map">
            <area target="" alt="Heart" title="Heart" href="" coords="75,166,81,150,35,149,39,172,22,204,23,229,29,248,33,267,46,260,57,260,98,268,104,257,107,242,103,224,97,204,106,198,98,173,85,175,81,170" shape="poly"
            data-content="The HLHS heart involves severe underdevelopment of the heart's left side, including the left ventricle, mitral valve, aortic valve, and aorta. This condition prevents the left side of the heart from effectively pumping oxygen-rich blood to vital organs. After the final Fontan surgery, blood will be able bypass the left side of the heart and enable the right ventricle to take over as the main, and only, pumping chamber">
            <area target="" alt="Lungs" title="Lungs" href="" coords="274,352,289,354,288,376,301,384,311,396,315,415,314,435,303,432,285,425,275,428,263,431,250,438,246,426,252,400,270,372" shape="poly"
            data-content="The lungs are responsible for gas exchange, allowing oxygen to enter the blood and carbon dioxide to exit.">
            <area target="" alt="Upper Body" title="Upper Body" href="" coords="382,139,382,114,394,100,402,100,415,103,423,112,425,126,422,140,432,150,439,167,421,175,403,174,388,174,367,167,373,151" shape="poly"
            data-content="The upper body includes the head, neck, and arms. These organs will consume oxygen delivered from the aortic arch.">
            <area target="" alt="Lower Body" title="Lower Body" href="" coords="585,113,623,113,627,139,629,160,621,187,622,198,587,193,581,165,579,148" shape="poly"
            data-content="The lower body includes the abdomen, lower back, and lower extremities. These organs consume oxygen delivered from the abdominal aorta.">
            <area target="" alt="Systemic Artery" title="Systemic Artery" href="" coords="55,147,76,147,78,104,83,83,97,64,113,53,125,44,144,40,168,39,200,39,393,41,392,96,414,98,414,40,471,40,530,41,554,49,566,54,573,61,576,67,584,78,589,90,594,111,616,110,613,93,609,77,598,62,589,50,577,37,557,26,532,22,513,18,146,20,111,28,94,36,79,50,70,64,61,79,56,100,54,120" shape="poly"
            data-content="The systemic artery delivers oxygen-rich blood to the organs.">
            <area target="" alt="Superior Vena Cava" title="Superior Vena Cava" href="" coords="394,177,414,177,417,196,420,205,427,217,436,227,447,237,462,243,485,247,498,251,498,268,471,266,458,261,439,254,422,244,410,231,398,207" shape="poly"
            data-content="The superior vena cava (SVC) delivers deoxygenated blood from the upper body to the pulmonary artery.">
            <area target="" alt="Inferior Vena Cava" title="Inferior Vena Cava" href="" coords="593,197,610,197,600,223,587,239,574,250,557,260,538,266,519,269,517,250,545,243,561,234,578,220,586,208" shape="poly"
            data-content="The inferior vena cava (IVC) delivers deoxygenated blood from the lower body to the pulmonary artery.">
            <area target="" alt="Pulmonary Artery" title="Pulmonary Artery" href="" coords="497,275,515,275,515,337,509,353,504,372,494,387,481,399,464,411,448,418,421,419,317,422,318,404,428,399,461,389,487,367,497,333" shape="poly"
            data-content="The pulmonary artery delivers deoxygenated blood from the body to the lungs.">
            <area target="" alt="Fontan Node" title="Fontan Node" href="" coords="499,252,517,274" shape="rect"
            data-content="The fontan node is where the IVC and SVC join the pulmonary artery.">
            <area target="" alt="Pulmonary Vein" title="Pulmonary Vein" href="" coords="56,265,75,266,77,334,83,355,91,369,105,381,115,390,132,397,157,400,250,399,247,421,156,422,119,416,98,406,79,390,69,375,61,357,56,337" shape="poly"
            data-content="The pulmonary vein delivers oxygenated blood from the lungs back to the heart.">
        </map>
    </div>

    <!-- Install ImageMapResizer -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/image-map-resizer/1.0.10/js/imageMapResizer.min.js"></script>

    <!-- Initialize the Resizer -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            imageMapResize(); // Resizes all image maps on the page
        });
    </script>

    <!-- Enables interactivity with the <area> elements in the map-->
    <script>
        // Example of an interaction when clicking an area
        document.querySelectorAll('area').forEach((area) => {
            area.addEventListener('click', (e) => {
                e.preventDefault(); // Prevent navigation (if href is empty)
            });
        });
    </script>

    <!-- Add Pop-up Modals -->
    <div id="popup-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span id="modal-close" class="close">&times;</span>
            <p id="modal-text"></p>
        </div>
    </div>    

    <!-- Sliders -->
    <h1>Manually Input Patient Vitals</h1>
    <form id="parameterForm">
        <!--Heart Rate Slider-->
        <label for="HR">Heart Rate (beats/min):</label>
        <input type="range" id="HR" name="HR" min="50" max="150" step="1" value="100" oninput="updateValue('HRValue', this.value)">
        <span id="HRValue">100</span><br><br>

        <!--UVR Slider-->
        <label for="UVR">Upper Vascular Resistance (Wood Units):</label>
        <input type="range" id="UVR" name="UVR" min="30" max="60" step="1" value="45" oninput="updateValue('UVRValue', this.value)">
        <span id="UVRValue">45</span><br><br>

        <!--LVR Slider-->
        <label for="LVR">Lower Vascular Resistance (Wood Units):</label>
        <input type="range" id="LVR" name="LVR" min="20" max="50" step="1" value="35" oninput="updateValue('LVRValue', this.value)">
        <span id="LVRValue">35</span><br><br>

        <!--PVR Slider-->
        <label for="PVR">Pulmonary Vascular Resistance (Wood Units):</label>
        <input type="range" id="PVR" name="PVR" min="5" max="20" step="1" value="10" oninput="updateValue('PVRValue', this.value)">
        <span id="PVRValue">10</span><br><br>

        <!--S_sa Slider-->
        <label for="S_sa">Systemic Artery Saturation (%):</label>
        <input type="range" id="S_sa" name="S_sa" min="0.98" max="1" step="0.01" value="0.99" oninput="updateValue('S_saValue', this.value)">
        <span id="S_saValue">0.99</span><br><br>

        <!--Hb Slider-->
        <label for="Hb">Hemoglobin (g/dL):</label>
        <input type="range" id="Hb" name="Hb" min="7" max="22" step="0.1" value="15" oninput="updateValue('HbValue', this.value)">
        <span id="HbValue">15</span><br><br>

        <!--CVO2u Slider-->
        <label for="CVO2u">Oxygen Consumption of the Upper Body (mL O2/min):</label>
        <input type="range" id="CVO2u" name="CVO2u" min="35" max="105" step="1" value="70" oninput="updateValue('CVO2uValue', this.value)">
        <span id="CVO2uValue">70</span><br><br>

        <!--CVO2l Slider-->
        <label for="CVO2l">Oxygen Consumption of the Lower Body (mL O2/min):</label>
        <input type="range" id="CVO2l" name="CVO2l" min="25" max="75" step="1" value="50" oninput="updateValue('CVO2lValue', this.value)">
        <span id="CVO2lValue">50</span><br><br>

        <button type="submit">Submit</button>
    </form>
    
    <!--------------------------------------------------------------->
    <select id="plotType">
        <option value="CO">Cardiac Output</option>
        <option value="Q_u">Blood Flow into the Upper Body</option>
        <option value="Q_l">Blood Flow into the Lower Body</option>
        <option value="Q_p">Blood Flow into the Lungs</option>
        <option value="P_sa">Pressure of the Systemic Artery</option>
        <option value="OER">Oxygen Extraction Ratio</option>
    </select>
    <button id="displayPlotButton">Display Plot</button>
    <div id="plotContainer"></div>
    
    <!---------------------------------------------------------------->

    <p id="result"></p>
    <script src="/static/script.js"></script>
</body>
</html>